<?xml version="1.0"?>

<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 2.0//EN" 
    "http://hibernate.sourceforge.net/hibernate-mapping-2.0.dtd">
    
 <hibernate-mapping>   
    <query name="getEntitiesByConceptCode">
       from Entity entity 
		   	join entity.semanticPropertyCollection semanticProperty 
		   		where semanticProperty.conceptCode = ? 
	</query>
	
	<query name="getAssociation">
		from Association association
           		where  association.entity.name = ?
           		AND association.sourceRole.name = ?
       			   	
	</query>
	
	<query name="getAssociations">
       from Association association
	       	where association.entity.id = ? AND 
       			   	association.targetEntity.id = ?
	</query>
	
	<query name="getCollectionAttributeRecord">
       from AttributeRecord collectionAttributeRecord
	       	where collectionAttributeRecord.entity.id = ? AND 
       			   	collectionAttributeRecord.attribute.id = ? AND
       			   	     collectionAttributeRecord.recordId = ?
	</query>
	
	<query name="getAllContainersByEntityGroupId">
	   from edu.common.dynamicextensions.domain.userinterface.Container container
	         	where container.entity.id in
             			(select entity.id
                      		from Entity entity
	                             join entity.entityGroupCollection entityGroup
	                                     where entityGroup.id = ?)
	</query>
	
	<query name="getContainerOfEntity">
		from edu.common.dynamicextensions.domain.userinterface.Container container
           		where  container.entity.id = ?
	</query>
	
	<query name="getControlOfAbstractAttribute">
		from Control control
           		where  control.abstractAttribute.id = ?
	</query>
	
	<query name="getAllContainersBeansByEntityGroupId">
			select container.id,container.caption
			   from edu.common.dynamicextensions.domain.userinterface.Container container
			         	where container.entity.id in
		             			(select entity.id
		                      		from Entity entity
			                             join entity.entityGroupCollection entityGroup
			                                     where entityGroup.id = ?)
	</query>
	
		
	
	<query name="getAllGroupBeans">
		select entityGroup.name,entityGroup.id
			   from EntityGroup entityGroup
	</query>
	
	<query name="checkDuplicateGroupName">
		select count(*)
			   from EntityGroup entityGroup where entityGroup.name = ?
	</query>
	
	<query name="getChildrenEntities">
	   from Entity entity
	      where entity.parentEntity.id = ?
	</query>
	
	<query name="getAssociationByIdentifier">
	   from Association association
	      where association.id = ?
	</query>	
	
	<query name="getAssociationsForTargetEntity">
	   from Association association
	      where association.targetEntity.id = ?
	</query>	
	
	<query name="getMainContainers">
	  select new edu.wustl.common.beans.NameValueBean(mainContainers.caption , mainContainers.id)
		    from EntityGroup entityGroup
		          join entityGroup.mainContainerCollection as mainContainers
 			       		where entityGroup.id =  ? 
 			       		  	 and mainContainers.entity.abstract = false
	</query>
	
	<query name="getContainerCaption">
	  select container.caption 
		    from edu.common.dynamicextensions.domain.userinterface.Container container
 			       		where container.id =  ? 
	</query>
	
	
</hibernate-mapping>
    